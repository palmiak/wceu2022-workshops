<?xml version="1.0"?>
<ruleset xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" name="Alley Buddy Demo" xsi:noNamespaceSchemaLocation="https://raw.githubusercontent.com/squizlabs/PHP_CodeSniffer/master/phpcs.xsd">
  <description>PHP_CodeSniffer standard for the Alley Buddy Demo.</description>

  <!-- Use the WordPress ruleset, with some customizations. -->
  <rule ref="WordPress">
    <!-- Allow short array syntax. -->
    <exclude name="Generic.Arrays.DisallowShortArraySyntax.Found" />
    <!-- Allow short ternary expressions -->
    <exclude name="WordPress.PHP.DisallowShortTernary" />
  </rule>

  <!-- Use the VIP Go ruleset. -->
  <rule ref="WordPress-Core" />

  <!-- Check for cross-version support for PHP 7.4 and higher. -->
  <config name="testVersion" value="7.4-"/>

  <!-- We prefer short array syntax. -->
  <rule ref="Generic.Arrays.DisallowLongArraySyntax" />

  <!-- In practice, partials should be loaded outside of the global namespace with get_template_part(). -->
  <rule ref="WordPress.NamingConventions.PrefixAllGlobals">
    <exclude-pattern>template-parts/</exclude-pattern>
  </rule>

  <!-- Encourage having only one class/interface/trait per file. -->
  <rule ref="Generic.Files.OneObjectStructurePerFile">
    <!--
    Increase severity. If it becomes a problem for this sniff to trigger an
    error, then we might want to provide feedback to the WPCS maintainers.
    See https://github.com/WordPress-Coding-Standards/WordPress-Coding-Standards/pull/1111.
    -->
    <type>error</type>
  </rule>

  <!--
  Pass some flags to PHPCS:
    p flag: Show progress of the run.
    s flag: Show sniff codes in all reports.
    n flag: Do not print warnings.
  -->
  <arg value="ps" />

  <!-- Check up to 20 files simultaneously. -->
  <arg name="parallel" value="20" />

  <!-- Set severity to 1 to see everything that isn't effectively turned off. -->
  <arg name="severity" value="1" />

  <!-- Exclude a few directories and autogenerated files. -->
  <exclude-pattern>*/node_modules/*</exclude-pattern>
  <exclude-pattern>*/vendor/*</exclude-pattern>
  <exclude-pattern>*.js</exclude-pattern>
  <exclude-pattern>*.css</exclude-pattern>
  <exclude-pattern>vendor/</exclude-pattern>
  <exclude-pattern>tests/</exclude-pattern>
  <exclude-pattern>wp/</exclude-pattern>
  <exclude-pattern>wp-content/</exclude-pattern>
  <exclude-pattern>cypress/</exclude-pattern>

  <!-- The version set here matches the minimum version tested in .travis.yml. -->
  <config name="minimum_supported_wp_version" value="5.9" />
</ruleset>
